global:
  domain: fhirhub.example.com
  storageClass: ""

# PostgreSQL for HAPI FHIR
hapi-postgresql:
  database:
    name: hapi
    username: hapi
    password: changeme-hapi-db
  persistence:
    enabled: true
    size: 10Gi

# PostgreSQL for Keycloak
keycloak-postgresql:
  database:
    name: keycloak
    username: keycloak
    password: changeme-keycloak-db
  persistence:
    enabled: true
    size: 5Gi

# HAPI FHIR Server
hapi-fhir:
  replicaCount: 1
  database:
    host: "{{ .Release.Name }}-hapi-postgresql"
    port: "5432"
    name: hapi
    username: hapi
    password: changeme-hapi-db
  resources:
    requests:
      cpu: 250m
      memory: 1Gi
    limits:
      cpu: "1"
      memory: 2Gi
  hpa:
    enabled: true
    minReplicas: 1
    maxReplicas: 5
    targetCPU: 80

# Keycloak
keycloak:
  database:
    host: "{{ .Release.Name }}-keycloak-postgresql"
    port: "5432"
    name: keycloak
    username: keycloak
    password: changeme-keycloak-db
  admin:
    username: admin
    password: changeme-admin
  realm: fhirhub
  hostname: ""
  ingress:
    enabled: false

# FhirHub API
fhirhub-api:
  replicaCount: 2
  image:
    repository: ""
    tag: "latest"
  secrets:
    hapiFhirBaseUrl: "http://{{ .Release.Name }}-hapi-fhir:8080/fhir"
    keycloakAuthority: "http://{{ .Release.Name }}-keycloak:8080/realms/fhirhub"
    keycloakAudience: "fhirhub-frontend"
    keycloakAdminApiBaseUrl: "http://{{ .Release.Name }}-keycloak:8080"
    keycloakRealm: "fhirhub"
    keycloakBackendClientId: "fhirhub-backend"
    keycloakBackendClientSecret: changeme-backend-secret
  ingress:
    enabled: false
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPU: 70
  pdb:
    enabled: true
    minAvailable: 1
  serviceMonitor:
    enabled: false

# FhirHub Frontend
fhirhub-frontend:
  replicaCount: 2
  image:
    repository: ""
    tag: "latest"
  ingress:
    enabled: false
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPU: 70
  pdb:
    enabled: true
    minAvailable: 1
  serviceMonitor:
    enabled: false
